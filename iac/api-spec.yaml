---
swagger: "2.0"
info:
  title: "integration - OpenAPI"
  description:
    "This is the OpenAPI specification for tatangharyadi/integration (https://github.com/tatangharyadi/integration).\
    \ An `apiKey` will be needed for authorization"
  version: "1.0.0"
schemes:
  - "https"
security: []
tags:
  - name: "auth"
    description: "Auth"
  - name: "auth0"
    description: "Auth0"
  - name: "erp"
    description: "ERP"
  - name: "odoo"
    description: "Odoo"
  - name: "loyalty"
    description: "Loyalty"
  - name: "voucherify"
    description: "Voucherify"
  - name: "payment"
    description: "Payment"

paths:
  /hello/auth:
    get:
      tags:
        - "auth"
      summary: "Hello World"
      operationId: "helloAuth"
      x-google-backend:
        address: https://integration-auth-238488984298.asia-southeast2.run.app
        path_translation: CONSTANT_ADDRESS
      security:
        - api_key: []
      produces:
        - "application/json"
      responses:
        200:
          description: "successful operation"
          schema:
            type: "string"
            example: "Hello, World!"
  /hello/erp:
    get:
      tags:
        - "erp"
      summary: "Hello World"
      operationId: "helloErp"
      x-google-backend:
        address: https://integration-erp-238488984298.asia-southeast2.run.app
        path_translation: CONSTANT_ADDRESS
      security:
        - api_key: []
      produces:
        - "application/json"
      responses:
        200:
          description: "successful operation"
          schema:
            type: "string"
            example: "Hello, World!"
  /hello/loyalty:
    get:
      tags:
        - "loyalty"
      summary: "Hello World"
      operationId: "helloLoyalty"
      x-google-backend:
        address: https://integration-loyalty-238488984298.asia-southeast2.run.app
        path_translation: CONSTANT_ADDRESS
      security:
        - api_key: []
      produces:
        - "application/json"
      responses:
        200:
          description: "successful operation"
          schema:
            type: "string"
            example: "Hello, World!"
  /hello/payment:
    get:
      tags:
        - "payment"
      summary: "Hello World"
      operationId: "helloPayment"
      x-google-backend:
        address: https://integration-payment-238488984298.asia-southeast2.run.app
        path_translation: CONSTANT_ADDRESS
      security:
        - api_key: []
      produces:
        - "application/json"
      responses:
        200:
          description: "successful operation"
          schema:
            type: "string"
            example: "Hello, World!"

  /auth0/gettoken:
    post:
      tags:
        - "auth0"
      summary: "generate a token"
      operationId: "generateToken"
      x-google-backend:
        address: https://integration-auth-238488984298.asia-southeast2.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "body"
          in: "body"
          description: "Client object"
          required: true
          schema:
            $ref: "#/definitions/Client"
      responses:
        201:
          description: "successful operation"
          schema:
            $ref: "#/definitions/Token"
        401:
          description: "Unauthorized"
          
          
  /odoo/getproductids:
    post:
      tags:
        - "odoo"
      summary: "Get one or more product IDs"
      operationId: "getProductId"
      x-google-backend:
        address: https://integration-erp-238488984298.asia-southeast2.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - api_key: []
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "body"
          in: "body"
          description: "Date range object"
          required: true
          schema:
            $ref: "#/definitions/DateRange"
      responses:
        201:
          description: "successful operation"
          schema:
            $ref: "#/definitions/ProductId"
        404:
          description: "Product IDs not found"
  /odoo/getproduct/{id}:
    get:
      tags:
        - "odoo"
      summary: "Get a product"
      operationId: "getProduct"
      x-google-backend:
        address: https://integration-erp-238488984298.asia-southeast2.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - api_key: []
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          description: "ID of product to return"
          required: true
          type: "string"
      responses:
        201:
          description: "successful operation"
          schema:
            $ref: "#/definitions/Product"
        404:
          description: "Product not found"

  /voucherify/getcustomer/{id}:
    get:
      tags:
        - "voucherify"
      summary: "Get a customer"
      operationId: "getCustomer"
      x-google-backend:
        address: https://integration-loyalty-238488984298.asia-southeast2.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - api_key: []
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          description: "Id of customer to return"
          required: true
          type: "string"
      responses:
        200:
          description: "successful operation"
          schema:
            $ref: "#/definitions/Customer"
        404:
          description: "Customer not found"

securityDefinitions:
  api_key:
    type: "apiKey"
    name: "key"
    in: "query"
  oauth2:
    authorizationUrl: "https://yummycorp.jp.auth0.com/"
    flow: "implicit"
    type: "oauth2"
    x-google-issuer: "https://yummycorp.jp.auth0.com/"
    x-google-jwks_uri: "https://yummycorp.jp.auth0.com/.well-known/jwks.json"
    x-google-audiences: "https://yummyos.yummycorp.com/"

definitions:

  Client:
    type: "object"
    required:
      - "client_id"
      - "client_secret"
    properties:
      client_id:
        type: "string"
      client_secret:
        type: "string"
      audience:
        type: "string"
        example: "pos-api"
      grant_type:
        type: "string"
        example: "client_credentials"
  Token:
    type: "object"
    required:
      - "access_token"
    properties:
      access_token:
        type: "string"
      scope:
        type: "string"
        example: "read:customer"
      expires_in:
        type: "integer"
        format: "int32"
      token_type:
        type: "string"
        example: "Bearer"
        
  DateRange:
    type: "object"
    required:
      - "fromDate"
      - "toDate"
    properties:
      fromDate:
        type: "string"
        format: "date-time"
      toDate:
        type: "string"
        format: "date-time"
        
  ProductId:
    type: "object"
    required:
    - "id"
    properties:
      id:
        type: "integer"
        format: "int64"
      update_timestamp:
        type: "string"
        format: "date-time"
  Product:
    type: "object"
    required:
      - "id"
    properties:
      id:
        type: "integer"
        format: "int64"
        example: 14236,
      sku:
        type: "string"
        example: "BAKE00008351"
      barcode:
        type: "string"
        example: "BAKE00008351"
      name:
        type: "string"
        example: "Agar-Agar Serbuk White, Swallow Globe, 12 pcs"
      description:
        type: "string"
      cost:
        type: "number"
        format: "float"
      price:
        type: "number"
        format: "float"
      parent:
        $ref: "#/definitions/ParentProduct"
  ParentProduct:
    type: "object"
    required:
      - "id"
    properties:
      id:
        type: "integer"
        format: "int64"
        example: 14236,
      sku:
        type: "string"
        example: "BAKE00008351"
      name:
        type: "string"
        example: "Agar-Agar Serbuk White, Swallow Globe, 12 pcs"
      description:
        type: "string"
      cost:
        type: "number"
        format: "float"

  Customer:
    type: "object"
    required:
      - "id"
    properties:
      id:
        type: "string"
        example: "GPAS-123"
      name:
        type: "string"
        example: "name"
      email:
        type: "string"
        example: "email@email.com"  
      phone:
        type: "string"
        example: "+62123"
      company_benefit:
        $ref: "#/definitions/Credit"
      personal_credit:
        $ref: "#/definitions/Credit"
  Credit:
    type: "object"
    properties:
      cycle:
        type: "string"
        example: "DD"
      limit:
        type: "number"
        format: "float"
      balance:
        type: "number"
        format: "float"
      transaction_timestamp:
        type: "string"
        format: "date-time"
